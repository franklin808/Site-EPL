<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Produto | EPL – Gráfica Flexográfica</title>
  <meta name="description" content="Detalhes do produto personalizado da EPL">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="/custom.css">
  <script src="https://hammerjs.github.io/dist/hammer.min.js"></script>
  <link rel="shortcut icon" href="/imgs/logo.png">
</head>
<body class="bg-gray-50 text-gray-800">

  <script src="/parciais/header.js"></script>
  <div id="header-placeholder"></div>

  <main class="max-w-6xl mx-auto px-4 py-10">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-10 items-start">
      <!-- Galeria de Imagens -->
      <div>
        <div class="relative">
          <img id="imagem-principal" src="" alt="" class="w-full h-auto rounded-lg shadow-md object-contain max-h-[500px] mx-auto">
        </div>
        
        <!-- Thumbnails -->
        <div class="flex mt-4 gap-2 justify-center flex-wrap" id="thumbnails"></div>
      </div>

      <!-- Detalhes do Produto -->
      <div>
        <h1 id="titulo" class="text-3xl font-bold mb-4"></h1>
        <p id="descricao" class="text-gray-700 text-lg mb-6"></p>

        <div class="bg-white rounded-lg p-6 shadow-md border">
          <p class="text-sm text-gray-500 mb-2">Atendemos em todo o Brasil</p>
          <p class="text-xl font-semibold text-purple-700 mb-4">Soluções personalizadas para sua marca</p>
          <a href="/#contato" class="inline-block bg-purple-700 hover:bg-purple-800 text-white font-medium px-6 py-3 rounded-full transition">Fazer orçamento</a>
        </div>
      </div>
    </div>
  </main>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const nomeProduto = urlParams.get('produto');

    const produtos = {
      'Rótulos para Picolés': {
        desc: 'Impressão resistente ao frio e umidade, ideal para produtos congelados.',
        baseImg: 'picole'
      },
      'Adesivos Personalizados': {
        desc: 'Perfeito para ação de marketing, campanhas eleitorais e identificação em veículos, roupas e vitrines.',
        baseImg: 'adesivos'
      },
      'Rótulos para Sucos': {
        desc: 'Acabamento brilhante que valoriza sua marca e resiste à umidade da refrigeração.',
        baseImg: 'suco'
      },
      // Adicione os demais produtos aqui...
    };

    const produto = produtos[nomeProduto];

    if (produto) {
      document.getElementById('titulo').textContent = nomeProduto;
      document.getElementById('descricao').textContent = produto.desc;

      const base = produto.baseImg;
      const imgDir = '/imgs/mockups/';
      const imagemPrincipal = document.getElementById('imagem-principal');
      const thumbnailsContainer = document.getElementById('thumbnails');

      let imagens = [];
      let index = 1;

      function verificarImagem(url) {
        return new Promise(resolve => {
          const img = new Image();
          img.onload = () => resolve(true);
          img.onerror = () => resolve(false);
          img.src = url;
        });
      }

      async function carregarImagens() {
        while (true) {
          const nomeArquivo = index === 1 ? `${base}.png` : `${base}${index}.png`;
          const caminhoCompleto = imgDir + nomeArquivo;

          const existe = await verificarImagem(caminhoCompleto);
          if (!existe) break;

          imagens.push(caminhoCompleto);
          index++;
        }

        if (imagens.length > 0) {
          imagemPrincipal.src = imagens[0];
          imagemPrincipal.alt = nomeProduto;

          imagens.forEach((imgUrl, i) => {
            const thumb = document.createElement('img');
            thumb.src = imgUrl;
            thumb.alt = nomeProduto + ' thumbnail ' + (i + 1);
            thumb.className = 'h-20 w-20 object-cover rounded-md border cursor-pointer hover:border-purple-500';
            thumb.addEventListener('click', () => {
              imagemPrincipal.src = imgUrl;
            });
            thumbnailsContainer.appendChild(thumb);
          });
        } else {
          imagemPrincipal.src = imgDir + 'erro404.png';
          imagemPrincipal.alt = 'Imagem não disponível';
        }
      }

      carregarImagens();
    } else {
      document.getElementById('titulo').textContent = 'Produto não encontrado';
      document.getElementById('descricao').textContent = 'Não foi possível localizar este produto.';
      document.getElementById('imagem-principal').src = '/imgs/erro404.png';
    }
  </script>

    <script src="/parciais/footer.js"></script>
    <div id="footer-placeholder"></div>
    <script src="scripts/footer.js"></script>
    <script src="scripts/mensagem.js"></script>

</body>
</html>
